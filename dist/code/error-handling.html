<!DOCTYPE html><html lang="en"><head><title>error-handling</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="error-handling"><meta name="groc-project-path" content="dist/exercise/assets/error-handling.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">dist/exercise/assets/error-handling.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h2 id="error-handling-functions">Error Handling functions</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isMissingParameters</span>(<span class="hljs-params">parameters, functionName</span>)</span>{

  <span class="hljs-keyword">var</span> checkDirection = _.flow(_.indexOf.bind(<span class="hljs-keyword">this</span>, [<span class="hljs-string">'left'</span>,<span class="hljs-string">'right'</span>,<span class="hljs-string">'up'</span>,<span class="hljs-string">'down'</span>]), _.partialRight(_.gt, -<span class="hljs-number">1</span>));
  <span class="hljs-keyword">var</span> expectedParameters = {
    move: [{
        name: <span class="hljs-string">'direction'</span>,
        test: checkDirection
      },{
        name: <span class="hljs-string">'distance'</span>,
        test: _.isNumber
    }],
    moveTo: [{
        name: <span class="hljs-string">'x'</span>,
        test: _.isNumber
      },{
        name: <span class="hljs-string">'y'</span>,
        test: _.isNumber
    }],
    change: [{
      name: <span class="hljs-string">'the image url'</span>,
      test: _.isString
    }],
    name: [{
      name: <span class="hljs-string">'the name'</span>,
      test: _.isString
    }],
    setBody: [{
      name: <span class="hljs-string">'the robot\' HTML element'</span>,
      test: _.isElement
    }]
  };


  <span class="hljs-keyword">var</span> examples = {
    move: <span class="hljs-string">'lion.move("left", 100)'</span>,
    moveTo: <span class="hljs-string">'lion.moveTo(300, 500)'</span>,
    change: <span class="hljs-string">'lion.change("http://www.clipartlord.com/wp-content/uploads/2014/04/robot20.png")'</span>,
    name: <span class="hljs-string">'lion.name("Leo")'</span>,
    setBody: <span class="hljs-string">'var robot = new Robot(document.getElementById("lion"))'</span>
  };

  <span class="hljs-keyword">try</span> {
    checkParameters.call(<span class="hljs-keyword">this</span>, parameters, expectedParameters[functionName], examples[functionName]);
  } <span class="hljs-keyword">catch</span>(error){
    <span class="hljs-built_in">console</span>.error(error.message);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkParameters</span>(<span class="hljs-params">parameters, expectedParameters, example</span>)</span>{

  <span class="hljs-keyword">var</span> missingParameters = _.reject(expectedParameters, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">expectedParameter, iteration</span>)</span>{
    <span class="hljs-keyword">return</span> expectedParameter.test(parameters[iteration]);
  });

  <span class="hljs-keyword">if</span>(missingParameters.length){
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MissingInformationError(_.pluck(missingParameters, <span class="hljs-string">'name'</span>), example);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MissingInformationError</span>(<span class="hljs-params">parameters, example</span>)</span>{
  <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'MissingInformationError'</span>
  <span class="hljs-keyword">this</span>.message = <span class="hljs-string">'This function needs information about '</span> + parameters.join(<span class="hljs-string">', '</span>) + <span class="hljs-string">'. For example, try: '</span> + example;
}

MissingInformationError.prototype = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Error</span>.prototype);
MissingInformationError.prototype.constructor = MissingInformationError;</div></div></div></div></body></html>